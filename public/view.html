<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>상담 미러링 화면</title>

  <style>
    body {
      background: #000;
      margin: 0;
      display: flex;
      height: 100vh;
      align-items: center;
      justify-content: center;
    }
    #screen {
      max-width: 100vw;
      max-height: 100vh;
      object-fit: contain;
    }
  </style>
</head>
<body>

  <img id="screen" src="" alt="미러링 이미지" />

  <script>
    // URL: /view?empNo=1234
    const url = new URL(window.location.href);
    const empNo = url.searchParams.get("empNo");

    if (!empNo) {
      alert("empNo 없음");
    }

    // SSE 연결
    const evt = new EventSource(`/events/${empNo}`);

    evt.onmessage = (e) => {
      const msg = JSON.parse(e.data);

      if (msg.type === "image") {
        document.getElementById("screen").src = msg.data; // base64 dataURL 이미지
      }
    };
  </script>

</body>
</html>
