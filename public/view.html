<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìƒë‹´ ë¯¸ëŸ¬ë§ í™”ë©´</title>

  <style>
    body {
      background: #000;
      margin: 0;
      display: flex;
      height: 100vh;
      align-items: center;
      justify-content: center;
    }
    #screen {
      max-width: 100vw;
      max-height: 100vh;
      object-fit: contain;
    }
  </style>
</head>
<body>

  <img id="screen" src="" alt="ë¯¸ëŸ¬ë§ ì´ë¯¸ì§€" />

  <script>
    const url = new URL(window.location.href);
    const empNo = url.searchParams.get("empNo");

    if (!empNo) {
      alert("empNo ê°’ì´ í•„ìš”í•©ë‹ˆë‹¤.");
    }

    const img = document.getElementById("screen");

    // SSE ì—°ê²°
    const evt = new EventSource(`/events/${empNo}`);

    evt.onmessage = (e) => {
      if (!e.data) return;

      try {
        const msg = JSON.parse(e.data);

        if (msg.type === "image") {
          img.src = msg.data;  // ğŸš€ base64 ì´ë¯¸ì§€ ì¦‰ì‹œ í‘œì‹œ
        }

      } catch (err) {
        console.warn("SSE JSON Parse Error:", err, e.data);
      }
    };
  </script>

</body>
</html>
